(function(){"use strict";function a(a){[].slice.call(arguments,1).forEach(function(b){Object.keys(b).forEach(function(c){a[c]=b[c]})})}function b(a){return"function"==typeof a}function c(a){return a&&b(a.then)}function d(a){this._subscribe=a}function e(a,b){return setTimeout(b,a)}function f(){Error.call(this,arguments)}function g(a,b,c){var d=!1;return new n(function(e,f,g){return a.subscribe(function(a){!d&&b.call(c,a)&&(d=!0),d&&e(a)},f,g)})}function h(a,b){return new n(function(c,d,e){var f;return b.then(function(){f=a.subscribe(c,d,e)},d),function(){f.cancel()}})}function i(a,b){return new n(function(c,d,e){function f(){g.cancel(),g=a.subscribe(c,d,e)}var g=b.subscribe(f,d,f);return function(){g.cancel()}})}function j(a){a instanceof j&&(a=a.cancel),b(a)&&(this.cancel=a)}function k(a,b,c){return new n(function(d,e,f){var g=a.subscribe(function(a){b.call(c,a)?(g.cancel(),f()):d(a)},e,f);return g})}function l(a,b){return new n(function(c,d,e){var f=a.subscribe(c,d,e);return b.then(f.cancel,f.cancel).then(e,d),f})}function m(a,b){return new n(function(c,d,e){function f(){h.cancel(),g.cancel(),e()}var g=a.subscribe(c,d,e),h=b.subscribe(f,function(a){g.cancel(),d(a)},f);return f})}d.prototype.log=function(a){a=a||"[STREAM-LOGGER]";var b=console.log.bind(console,a);return this.subscribe(b.bind(null,"[value]"),b.bind(null,"[error]"),b.bind(null,"[completed]"))};var n=d,o=function(){return new n(function(a,b,c){var d=setTimeout(c);return clearTimeout.bind(null,d)})};e.cancel=function(a){clearTimeout(a)};var p=e.bind(null,0);p.cancel=e.cancel;var q=function(a,b){var c,d=0;return b=b||function(a){return a},a=a||p,new n(function(e){function f(){c=a(function(){f(),e(b(d++))})}return f(),function(){a.cancel(c)}})},r=function(a,b){var c=q(b);return new n(function(d,e,f){function g(){h.cancel(),f()}if(!a.length)return void b(f);var h=c.subscribe(function(b){d(a[b]),b+1===a.length&&g()},e,f);return g})},s=function(a,b,c){return new n(function(d){function e(c,e){return"function"!=typeof a[c]?(a[c](b,d),a[e].bind(a,b,d)):void 0}return c&&c.method?e(c.method,c.remove):e("on","off")||e("addListener","removeListener")||e("addEventListener","removeEventListener")})},t=function(a){return new n(function(b,c,d){a.then(function(a){b(a),d()},c)})},u=function(a){return a instanceof n?a:new n(function(b,c,d){return a.subscribe(b,c,d)})},v=function(){},w=function(a){return a?Array.isArray(a)?r(a):c(a)?t(a):a instanceof n?a:"function"==typeof a.subscribe?u(a):void 0:null},x=function(){var a=1===arguments.length?arguments[0]:[].slice.call(arguments),b=[];return new n(function(c,d,e){function f(a){b[a]=!0,b.every(Boolean)&&(g(),e())}function g(){h.forEach(function(a){a.cancel()})}var h=a.map(function(a,e){return b[e]=!1,n.from(a).subscribe(c,function(a){g(),d(a)},function(){f(e)})});return g})},y=function(){return new n(function(){})},z=function(a,b){1===arguments.length&&(b=a,a=0);var c,d=b>a?1:-1;return new n(function(e,f,g){function h(a){c=setTimeout(function(){e(a),a!==b?h(a+d):g()})}return h(a),function(){clearTimeout(c)}})},A=function(a,b){var c;return new n(function(d,e,f){function g(){c=setTimeout(function(){d(a),b--,b?g():f()})}return g(),function(){clearTimeout(c)}})},B=function(a){return new n(function(b,c,d){var e=setTimeout(function(){b(a),d(a)});return clearTimeout.bind(null,e)})},C=function(a){return new n(function(b,c){var d=setTimeout(function(){c(a)});return clearTimeout.bind(null,d)})},D=function(){var a=[].slice.call(a),b=a.pop(),d=[],e=[];return new n(function(f,g,h){function i(){j.filter(Boolean).forEach(function(a){a.cancel()})}var j=a.map(function(a,j){function k(a){if(d[j].push(a),d.every(function(a){return a.length>0})){var c=d.map(function(a){return a.shift()});f(b.apply(null,c))}}function l(a){i(),g(a)}function m(){e[j]=!0,e.every(Boolean)&&(i(),h())}return d[j]=[],e[j]=!1,a instanceof n?a.subscribe(k,l,m):c(a)?void a.then(function(a){k(a),m()},l):void(Array.isArray(a)&&setTimeout(function(){a.forEach(k),m()}))});return i})},E=function(a,b){var c=this,d=0,e=b||null;return new n(function(b,f,g){return c.subscribe(function(f){e=0!==d||e?a(e,f,d++,c):f,b(e)},f,g)})},F=function(a){var b,c,d=this;return new n(function(e,f,g){return b=d.subscribe(e,f,function(){c=a.subscribe(e,f,g)}),function(){b.cancel(),c&&c.cancel()}})},G=function(a){var b=this;return new n(function(c,d,e){return b.subscribe(function(b){setTimeout(c.bind(null,b),a)},d,e)})},H=function(a,b){var c=this,d=0;return new Promise(function(e,f){var g=c.subscribe(function(f){a.call(b,f,d++,c)||(g.cancel(),e(!1))},f,e.bind(null,!0));return g})},I=function(a,b){var c=this,d=0;return new n(function(e,f,g){return c.subscribe(function(f){a.call(b,f,d++,c)&&e(f)},f,g)})},J=function(a){a=a||1;var b=this,c=[];return new Promise(function(d,e){var f=b.subscribe(function(b){c.push(b),c.length===a&&(d(c),f.cancel())},e,function(){d(c)})})},K=function(){var a=this,b=[];return new n(function(c,d,e){return a.subscribe(function(a){a instanceof n?(a.subscribe(c,d),b.push(a.toPromise())):c(a)},d,function(){Promise.all(b).then(e)})})},L=function(){var a=this;return new n(function(b,c,d){return a.subscribe(function(a){Array.isArray(a)?a.forEach(b):b(a)},c,d)})},M=function(a,b){var c=this,d=0;return new Promise(function(e,f){c.subscribe(function(e){a.call(b,e,d++,c)},f,e)})},N=function(a){a=a||1;var b=this,c=[];return new Promise(function(d,e){b.subscribe(function(b){c.push(b),c.length>=a&&c.shift()},e,function(){d(c)})})},O=function(a,b){var c=this,d=0;return new n(function(e,f,g){return c.subscribe(function(f){e(a.call(b,f,d++,c))},f,g)})},P=function(a,b){var c=this,d=0,e=b||null;return new Promise(function(b,f){c.subscribe(function(b){e=0!==d||e?a(e,b,d++,c):b},f,function(){b(e)})})};f.prototype=Object.create(Error);var Q=function(){var a=this;return new Promise(function(b,c){var d,e=!1;a.subscribe(function(a){e&&c(new f),e=!0,d=a},c,function(){e&&b(d),c(new f)})})},R=function(a){var b=this,c=a;return new n(function(a,d,e){return b.subscribe(function(b){c>0?c--:a(b)},d,e)})},S=function(a,b){return"function"==typeof a?g(this,a,b):c(a)?h(this,a):i(this,a)},T=function(a,b){var c=this,d=0;return new Promise(function(e,f){var g=c.subscribe(function(f){a.call(b,f,d++,c)&&(g.cancel(),e(!0))},f,e.bind(null,!1));return g})};j.prototype.cancel=function(){};var U=j,V=function(a,b,c){var d=this._subscribe(a,b,c);return new U(d)},W=function(a){var b=this,c=a;return new n(function(a,d,e){var f=b.subscribe(function(b){a(b),c--,0===c&&(f.cancel(),e())},d,e);return f})},X=function(a,b){return"function"==typeof a?k(this,a,b):c(a)?l(this,a):m(this,a)},Y=function(){var a=this,b=[];return new Promise(function(c,d){a.subscribe(function(a){b.push(a)},d,function(){c(b)})})},Z=function(){var a=this;return new Promise(function(b,c){a.subscribe(null,c,b)})},$=function(a){a=a||function(a){return a};throw new Error("Not implemented")},_=X,ab=function(){var a=[].slice.call(arguments);return D.apply(null,[this].concat(a))};a(n,{empty:o,fromArray:r,fromEvent:s,fromPromise:t,fromStream:u,fromWritable:v,from:w,interval:q,merge:x,noop:y,range:z,repeat:A,single:B,"throw":C,zip:D}),a(n.prototype,{accumulate:E,concat:F,delay:G,every:H,filter:I,first:J,flatten:K,flattenArray:L,forEach:M,last:N,map:O,reduce:P,single:Q,skip:R,skipUntil:S,some:T,subscribe:V,take:W,takeUntil:X,toArray:Y,toPromise:Z,unique:$,until:_,zip:ab});var bb=n;window.ReadableStream=bb}).call(this);